<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stone Paper Scissor Game</title>
  </head>
  <body style="height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#071022 0%,#071a2a 100%);color:#e6edf3;display:flex;align-items:center;justify-content:center;">
    <div class="card" role="application" aria-label="Stone Paper Scissor game" style="width:min(720px,95%);background:linear-gradient(180deg,rgba(255,255,255,0.03), rgba(0,0,0,0.15));padding:2rem;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.6);text-align:center;">
      <h1 style="margin:0;font-size:1.75rem;letter-spacing:0.4px">Stone ¬∑ Paper ¬∑ Scissor</h1>
      <p class="lead" style="color:#94a3b8;margin:0.5rem 0 1.25rem">Play against the computer ‚Äî best of your clicks wins.</p>

      <div class="scoreboard" aria-live="polite" style="display:flex;gap:1rem;justify-content:center;align-items:center;margin-bottom:1rem;">
        <div class="score" id="userScoreBox" style="background:rgba(255,255,255,0.03);padding:0.6rem 1rem;border-radius:999px;min-width:110px;display:flex;flex-direction:column;align-items:center"><span class="label" style="font-size:0.75rem;color:#94a3b8">You</span><span class="value" id="userScore" style="font-size:1.25rem;font-weight:700;color:#fff">0</span></div>
        <div class="score" id="compScoreBox" style="background:rgba(255,255,255,0.03);padding:0.6rem 1rem;border-radius:999px;min-width:110px;display:flex;flex-direction:column;align-items:center"><span class="label" style="font-size:0.75rem;color:#94a3b8">Computer</span><span class="value" id="compScore" style="font-size:1.25rem;font-weight:700;color:#fff">0</span></div>
      </div>

      <div class="choices" role="tablist" aria-label="Choices" style="display:flex;gap:1rem;justify-content:center;margin:1rem 0">
        <button class="btn" data-choice="Stone" onclick="play('Stone')" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 6px 20px rgba(139,92,246,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='';" style="background:transparent;border:2px solid #8b5cf6;padding:0.7rem 1.2rem;border-radius:999px;color:#e6edf3;cursor:pointer;transition:all .18s;min-width:110px;font-weight:600"><span style="font-size:1.15rem;margin-right:0.5rem">ü™®</span>Stone</button>
        <button class="btn" data-choice="Paper" onclick="play('Paper')" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 6px 20px rgba(6,182,212,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='';" style="background:transparent;border:2px solid #06b6d4;padding:0.7rem 1.2rem;border-radius:999px;color:#e6edf3;cursor:pointer;transition:all .18s;min-width:110px;font-weight:600"><span style="font-size:1.15rem;margin-right:0.5rem">üìÑ</span>Paper</button>
        <button class="btn" data-choice="Scissor" onclick="play('Scissor')" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 6px 20px rgba(249,115,22,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='';" style="background:transparent;border:2px solid #f97316;padding:0.7rem 1.2rem;border-radius:999px;color:#e6edf3;cursor:pointer;transition:all .18s;min-width:110px;font-weight:600"><span style="font-size:1.15rem;margin-right:0.5rem">‚úÇÔ∏è</span>Scissor</button>
      </div>

      <div style="display:flex;justify-content:center;gap:1rem;align-items:center;flex-direction:column;">
        <div style="display:flex;gap:0.6rem;align-items:center;flex-wrap:wrap;justify-content:center">
          <label for="firstTo" style="color:#94a3b8;">First to</label>
          <input id="firstTo" type="number" min="1" value="5" style="width:64px;padding:0.4rem;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;text-align:center">
          <button onclick="applyFirstTo()" style="background:#0b1220;border:1px solid rgba(255,255,255,0.04);padding:0.45rem 0.6rem;border-radius:8px;color:#94a3b8;cursor:pointer">Set</button>
          <span style="margin-left:1.5rem;color:#94a3b8;">Mode:</span>
          <select id="modeSelect" onchange="setMode(this.value)" style="margin-left:0.3rem;padding:0.35rem 0.7rem;border-radius:6px;background:#0b1220;color:#fff;border:1px solid #222;">
            <option value="cpu">Vs Computer</option>
            <option value="2p">2-Player</option>
          </select>
        </div>
        <div id="turnStatus" style="margin-top:0.4rem;color:#94a3b8;display:none"></div>
        <div id="matchStatus" style="margin-top:0.4rem;color:#94a3b8">First to: <span id="targetDisplay">5</span> ‚Ä¢ Keyboard: ‚Üê/‚Üë/‚Üí or 1/2/3</div>
      </div>

      <div class="result" id="result" aria-live="polite" style="margin-top:1rem;padding:0.8rem;border-radius:8px;background:rgba(255,255,255,0.02);min-height:48px;display:flex;align-items:center;justify-content:center;font-weight:600">Make your choice</div>

      <div class="controls" style="margin-top:1rem;display:flex;gap:0.75rem;justify-content:center">
        <button class="reset" onclick="resetScore()" style="background:transparent;border:1px dashed rgba(255,255,255,0.06);padding:0.5rem 0.75rem;border-radius:8px;color:#94a3b8;cursor:pointer">Reset Score</button>
        <button onclick="newMatch()" id="newMatchBtn" style="background:linear-gradient(90deg,#06b6d4,#8b5cf6);border:none;padding:0.5rem 0.85rem;border-radius:8px;color:#071022;cursor:pointer;font-weight:700">New Match</button>
      </div>
    </div>

    <script>
      let userScore = 0;
      let compScore = 0;
      let firstTo = parseInt(document.getElementById('firstTo').value, 10) || 5;
      let matchOver = false;


      let mode = 'cpu'; // 'cpu' or '2p'
      let turn = 1; // 1 or 2 (for 2p mode)
      let p1Choice = null, p2Choice = null;

      function generateComputerChoice() {
        const choices = ['Stone', 'Paper', 'Scissor'];
        return choices[Math.floor(Math.random() * choices.length)];
      }

      function updateScoreboard(){
        document.getElementById('userScore').textContent = userScore;
        document.getElementById('compScore').textContent = compScore;
      }

      function setButtonsDisabled(disabled){
        document.querySelectorAll('.btn').forEach(b=>{
          b.disabled = disabled;
          b.style.opacity = disabled ? '0.5' : '1';
          b.setAttribute('aria-disabled', disabled);
        });
      }

      function checkMatchOver(){
        if(userScore >= firstTo || compScore >= firstTo){
          matchOver = true;
          setButtonsDisabled(true);
          const winner = userScore > compScore ? 'You' : 'Computer';
          document.getElementById('matchStatus').innerHTML = `<strong style="color:#fff">Match over:</strong> ${winner} won the match`;
          document.getElementById('result').innerHTML += ` <span style="margin-left:8px;color:#94a3b8">(Match finished)</span>`;
        }
      }


      function play(choice) {
        if(matchOver) return;
        if(mode === 'cpu') {
          const sysChoice = generateComputerChoice();
          const resultEl = document.getElementById('result');
          if (sysChoice === choice) {
            resultEl.innerHTML = `<span style="color:#94a3b8">Both chose <strong style=\"color:#fff\">${choice}</strong>. It's a tie.</span>`;
          } else if (
            (choice === 'Stone' && sysChoice === 'Scissor') ||
            (choice === 'Paper' && sysChoice === 'Stone') ||
            (choice === 'Scissor' && sysChoice === 'Paper')
          ) {
            userScore++;
            updateScoreboard();
            resultEl.innerHTML = `<span style="color:#10b981;font-weight:700">You win!</span> ${choice} beats ${sysChoice}.`;
            flashScore('user');
          } else {
            compScore++;
            updateScoreboard();
            resultEl.innerHTML = `<span style="color:#ef4444;font-weight:700">Computer wins</span> ${sysChoice} beats ${choice}.`;
            flashScore('comp');
          }
          resultEl.animate([{opacity:0.1, transform:'translateY(6px)'},{opacity:1, transform:'translateY(0)'}], {duration:260,easing:'ease-out'});
          checkMatchOver();
        } else {
          // 2-Player mode
          const turnStatus = document.getElementById('turnStatus');
          const resultEl = document.getElementById('result');
          if(turn === 1) {
            p1Choice = choice;
            turn = 2;
            turnStatus.textContent = "Player 2: Make your choice";
            resultEl.textContent = "Player 2: Your turn";
          } else if(turn === 2) {
            p2Choice = choice;
            // resolve round
            let msg = '';
            if(p1Choice === p2Choice) {
              msg = `<span style=\"color:#94a3b8\">Both chose <strong style=\"color:#fff\">${p1Choice}</strong>. It's a tie.</span>`;
            } else if (
              (p1Choice === 'Stone' && p2Choice === 'Scissor') ||
              (p1Choice === 'Paper' && p2Choice === 'Stone') ||
              (p1Choice === 'Scissor' && p2Choice === 'Paper')
            ) {
              userScore++;
              updateScoreboard();
              msg = `<span style=\"color:#10b981;font-weight:700\">Player 1 wins!</span> ${p1Choice} beats ${p2Choice}.`;
              flashScore('user');
            } else {
              compScore++;
              updateScoreboard();
              msg = `<span style=\"color:#ef4444;font-weight:700\">Player 2 wins</span> ${p2Choice} beats ${p1Choice}.`;
              flashScore('comp');
            }
            resultEl.innerHTML = msg;
            resultEl.animate([{opacity:0.1, transform:'translateY(6px)'},{opacity:1, transform:'translateY(0)'}], {duration:260,easing:'ease-out'});
            checkMatchOver();
            // reset for next round
            turn = 1;
            p1Choice = null; p2Choice = null;
            setTimeout(()=>{
              if(!matchOver){
                turnStatus.textContent = "Player 1: Make your choice";
                resultEl.textContent = "Player 1: Your turn";
              }
            }, 1200);
          }
        }
      }

      function flashScore(which){
        const el = which === 'user' ? document.getElementById('userScoreBox') : document.getElementById('compScoreBox');
        el.animate([{transform:'scale(1.03)'},{transform:'scale(1)'}],{duration:220});
      }

      function resetScore(){
        userScore = 0; compScore = 0; matchOver = false;
        updateScoreboard();
        if(mode === '2p'){
          document.getElementById('turnStatus').style.display = '';
          document.getElementById('turnStatus').textContent = "Player 1: Make your choice";
          document.getElementById('result').textContent = 'Player 1: Your turn';
        } else {
          document.getElementById('turnStatus').style.display = 'none';
          document.getElementById('result').textContent = 'Score reset ‚Äî make your choice';
        }
        document.getElementById('matchStatus').innerHTML = `First to: <span id="targetDisplay">${firstTo}</span> ‚Ä¢ Keyboard: ‚Üê/‚Üë/‚Üí or 1/2/3`;
        setButtonsDisabled(false);
        turn = 1; p1Choice = null; p2Choice = null;
      }

      function applyFirstTo(){
        const v = parseInt(document.getElementById('firstTo').value,10);
        firstTo = (isNaN(v) || v < 1) ? 1 : v;
        document.getElementById('targetDisplay').textContent = firstTo;
        resetScore();
      }

      function newMatch(){
        // reset scores and UI but keep current firstTo
        resetScore();
        document.getElementById('result').textContent = 'New match started ‚Äî make your choice';
      }


      // Keyboard support: 1=Stone, 2=Paper, 3=Scissor, ArrowLeft=Stone, ArrowUp=Paper, ArrowRight=Scissor
      window.addEventListener('keydown', (e)=>{
        if(document.activeElement && document.activeElement.tagName === 'INPUT') return; // ignore while typing
        if(matchOver) return;
        let keyChoice = null;
        if(e.key === '1' || e.key === 'ArrowLeft') keyChoice = 'Stone';
        if(e.key === '2' || e.key === 'ArrowUp') keyChoice = 'Paper';
        if(e.key === '3' || e.key === 'ArrowRight') keyChoice = 'Scissor';
        if(keyChoice) play(keyChoice);
      });

      function setMode(val){
        mode = val;
        resetScore();
        if(mode === '2p'){
          document.getElementById('userScoreBox').querySelector('.label').textContent = 'Player 1';
          document.getElementById('compScoreBox').querySelector('.label').textContent = 'Player 2';
        } else {
          document.getElementById('userScoreBox').querySelector('.label').textContent = 'You';
          document.getElementById('compScoreBox').querySelector('.label').textContent = 'Computer';
        }
      }

      // initialize display
      document.getElementById('targetDisplay').textContent = firstTo;
      document.getElementById('turnStatus').style.display = 'none';
    </script>
  </body>
</html>
